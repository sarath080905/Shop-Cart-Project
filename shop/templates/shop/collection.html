{% extends 'shop/layout/main.html' %}

{% block title %}
Shop | Collections
{% endblock title %}

{% block content %}

<!-- =====================
     HERO SECTION (only for guests)
====================== -->
{% if not request.user.is_authenticated %}
<section class="relative text-center container mx-auto mt-16 px-6 overflow-hidden rounded-xl shadow-md max-w-5xl">

  <!-- ðŸŒŸ Animated Green-Yellow Gradient Background -->
  <div
    class="absolute inset-0 bg-gradient-to-r from-green-300 via-yellow-200 to-green-400 animate-gradient bg-[length:200%_200%] -z-10 rounded-xl">
  </div>

  <div class="py-10 z-10">
    <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4 drop-shadow-md">
      ðŸŒŸ Bestsellers
    </h1>
    <p class="text-base md:text-lg text-gray-800 mb-8 max-w-xl mx-auto leading-relaxed">
      Discover our most popular products based on sales.
      Updated hourly to keep you in trend.
    </p>

    <div class="flex flex-wrap justify-center gap-4">
      <a href="{% url 'login' %}" class="px-5 py-2.5 font-medium border border-green-600 text-green-700 
                hover:bg-green-600 hover:text-white rounded-lg shadow 
                transition duration-300 transform hover:scale-105 text-sm md:text-base">
        Already User
      </a>
      <a href="{% url 'register' %}" class="px-5 py-2.5 font-medium bg-yellow-400 text-gray-900 
                hover:bg-yellow-500 rounded-lg shadow 
                transition duration-300 transform hover:scale-105 text-sm md:text-base">
        Register
      </a>
    </div>
  </div>
</section>

<style>
  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  .animate-gradient {
    animation: gradientShift 10s ease infinite;
  }
</style>
{% endif %}


<!-- =====================
     CATEGORY LISTING
====================== -->
<section class="bg-gradient-to-b from-yellow-50 to-green-50 py-12 px-6 mt-10">
  <div class="container mx-auto px-6">

    <!-- Section Title -->
    <div class="text-center mb-12">
      <h2 class="text-3xl font-bold text-green-700"><i class="fa fa-cubes"></i> Categories</h2>
      <p class="text-gray-600 mt-2">Browse our exclusive product categories</p>
      <div class="h-1 bg-green-500 mx-auto mt-4 rounded"></div>
    </div>

    <!-- Messages -->
    <div id="messages" class="mb-6">
      {% include 'shop/inc-include/message.html' %}
    </div>

    <!-- Category Grid -->
    <div class="grid gap-8 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      {% for item in categories %}
      <a href="{% url 'collection_view' item.name %}"
         class="bg-white shadow-md rounded-xl overflow-hidden group hover:shadow-2xl hover:-translate-y-1 transition-all duration-500 flex flex-col no-underline border-t-4 border-yellow-300 hover:border-green-400">

        <!-- Image Section -->
        <div class="relative overflow-hidden rounded-t-xl bg-gray-50 flex items-center justify-center h-64">
          {% if item.image %}
            <img src="{{ item.image.url }}" alt="{{ item.name }}"
                 class="w-full h-full object-contain transition-transform duration-300 group-hover:scale-105">
          {% else %}
            <img src="{{ item.image_url }}" alt="{{ item.name }}"
                 class="w-full h-full object-contain transition-transform duration-300 group-hover:scale-105">
          {% endif %}
        </div>

        <!-- Content -->
        <div class="p-5 flex flex-col flex-grow">
          <h5 class="text-lg font-semibold text-green-700 group-hover:text-yellow-600 truncate">
            {{ item.name }}
          </h5>
          <p class="text-gray-600 text-sm mt-2 line-clamp-3 flex-grow">
            {{ item.description }}
          </p>
          <span class="inline-block mt-4 text-green-600 group-hover:text-yellow-600 font-medium">
            Explore â†’
          </span>
        </div>
      </a>
      {% empty %}
      <p class="text-center text-gray-500 col-span-full">No categories available.</p>
      {% endfor %}
    </div>
  </div>
</section>


<script>
  // Auto-hide alerts after 3s
  setTimeout(function () {
    let alerts = document.querySelectorAll('#messages .alert');
    alerts.forEach(function (alert) {
      let bsAlert = new bootstrap.Alert(alert);
      bsAlert.close();
    });
  }, 3000);
</script>

{% endblock content %}
