{% extends 'shop/layout/main.html' %}
{% load custom_filters %}

{% block title %}
Shop | Favorites
{% endblock title %}

{% block content %}
<div class="container mx-auto py-20 px-4">

    <!-- Page Header -->
    <div class="text-center mb-8">
        <h2 class="text-3xl font-bold text-green-700"><i class="fas fa-heart text-yellow-500 mr-2"></i>My Favorites</h2>
        <p class="text-gray-600 mt-2">All the products you've marked as favorites</p>
        <div class="h-1  bg-green-500 mx-auto mt-4 rounded"></div>
    </div>

    {% if favorite_products %}
    <div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">

        {% for item in favorite_products %}
        <div class="bg-white rounded-xl shadow-md overflow-hidden group hover:shadow-xl transition duration-300">
            
            <!-- Product Image -->
            <div class="relative h-64 bg-gray-50 flex items-center justify-center">
                {% if item.product.Product_image %}
                    <img src="{{ item.product.Product_image.url }}" alt="{{ item.product.name }}"
                         class="w-full h-full object-contain transition-transform duration-300 group-hover:scale-105">
                {% elif item.product.image_url %}
                    <img src="{{ item.product.image_url }}" alt="{{ item.product.name }}"
                         class="w-full h-full object-contain transition-transform duration-300 group-hover:scale-105">
                {% else %}
                    <img src="https://via.placeholder.com/300x200?text=No+Image" alt="No Image"
                         class="w-full h-full object-contain">
                {% endif %}
            </div>

            <!-- Product Info -->
            <div class="p-4 flex flex-col flex-grow">
                <h5 class="text-lg font-semibold text-green-700 group-hover:text-yellow-600 truncate">{{ item.product.name }}</h5>
                <p class="text-gray-600 mt-1 font-medium">â‚¹{{ item.product.selling_price }}</p>

                <!-- Actions -->
                <div class="mt-4 flex justify-between items-center">
                    <form method="post" action="{% url 'remove_from_favorite' item.id %}">
                        {% csrf_token %}
                        <button type="submit" class="flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg shadow-md transition duration-300">
                            <i class="fas fa-trash"></i> Remove
                        </button>
                    </form>
                    <a href="{% url 'product_detail' item.product.category.name item.product.name %}" 
                       class="flex items-center gap-2 bg-yellow-300 hover:bg-green-500 text-green-900 hover:text-white px-3 py-1 rounded-lg shadow-md transition duration-300">
                        <i class="fas fa-eye"></i> View
                    </a>
                </div>
            </div>

        </div>
        {% endfor %}
    </div>

    {% else %}
    <div class="text-center py-20">
        <i class="fas fa-heart fa-6x text-yellow-400 mb-6 animate-bounce"></i>
        <h4 class="text-2xl font-bold text-green-700 mb-2">Your favorites list is empty</h4>
        <p class="text-gray-600 mb-6">Start adding items you love to see them here!</p>
        <a href="{% url 'collections' %}" class="inline-flex items-center gap-2 bg-yellow-300 hover:bg-green-500 text-green-900 hover:text-white font-semibold px-6 py-3 rounded-xl shadow-md transition duration-300">
            <i class="fas fa-shopping-bag"></i> Browse Products
        </a>
    </div>
    {% endif %}

</div>
{% endblock %}
